<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Vkontakte iOS SDK LV by AndrewShmig</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Vkontakte iOS SDK LV</h1>
        <h2>More Power and Flexibility</h2>
        <a href="https://github.com/AndrewShmig/Vkontakte-iOS-SDK-LV" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">

          <h3>How to install?</h3>
		  <p>There are two ways to install Vkontakte iOS SDK: CocoaPods and manually.</p>

		  <p>Installing <a href="https://github.com/CocoaPods/Specs/tree/master/Vkontakte-iOS-SDK-LV">Vkontakte iOS SDK</a> using <a href="http://cocoapods.org">CocoaPods</a> is just simple as creating Podfile and running a command in terminal.</p>
		  <p>1. Create Podfile in your project's directory and enter following line:</p>
<pre><code>
pod 'Vkontakte-iOS-SDK-LV'
</code></pre>
		  <p>2. Now you can install the dependencies in your project:</p>
<pre>
<code>
$ pod install
</code>
</pre>
		  <p>Make sure to always open the Xcode workspace instead of the project file when building your project:</p>
<pre><code>
$ open App.xcworkspace
</code></pre>
		  <p>Now you can import your dependencies e.g.:</p>
<pre><code>
#import "VkontakteSDK.h"
</code></pre>

		  <p>To install manually you need to follow these steps:</p>
		  <p>1. Open your XCode project
		  <img src="http://habrastorage.org/storage3/803/b37/c92/803b37c925f7ed9a2587b9932bd7a658.png"/>
		  2. Add Vkontakte iOS SDK to your project by draging&dropping Vkontakte-iOS-SDK-LV directory.
		  <a href="http://habrastorage.org/storage3/e42/012/007/e420120078ae09b85d19740ba6d0a47c.png"><img src="http://habrastorage.org/storage3/e42/012/007/e420120078ae09b85d19740ba6d0a47c.png"/></a>
		  3. Build & Run</p>
		  
          <h3>How to authorize user?</h3>
		  <p>
			  Lets assume we have created a new project (Single View Application) and added VK iOS SDK, as it was described in previous section. 
			  We should have something like this:
			  <a href="http://habrastorage.org/storage3/342/534/04e/34253404e9fa7befc1ec318b3fe53149.png"><img src="http://habrastorage.org/storage3/342/534/04e/34253404e9fa7befc1ec318b3fe53149.png"/></a>
	  		
			  After adding VK iOS SDK:
			  <a href="http://habrastorage.org/storage3/342/534/04e/34253404e9fa7befc1ec318b3fe53149.png"><img src="http://habrastorage.org/storage3/55a/f61/5de/55af615deeace42f0ade354a72f18b23.png"/></a>
			  
			  Make your ViewController.h file look like:
<pre>
<code>
	#import &lt;UIKit/UIKit.h&gt;
	#import "VkontakteSDK.h"

	@interface ViewController : UIViewController &lt; VKConnectorDelegate &gt;

	@end
</code>
</pre>   	   	   	  
			  
			  and ViewController.m file:
<pre>
<code>
	#import "ViewController.h"


	@implementation ViewController
	{
	    UIWebView *_webView;
	}

	- (void)viewDidLoad
	{
	    [super viewDidLoad];
		// Do any additional setup after loading the view, typically from a nib.

	    CGRect frame = [[UIScreen mainScreen] bounds];
	    _webView = [[UIWebView alloc] initWithFrame:frame];
	    [self.view addSubview:_webView];

	    [[VKConnector sharedInstance] startWithAppID:@"3899649"
	                                      permissons:@[@"wall"]
	                                         webView:_webView
	                                        delegate:self];
	}

	#pragma mark - VKConnectorDelegate

	- (void)        VKConnector:(VKConnector *)connector
	accessTokenRenewalSucceeded:(VKAccessToken *)accessToken
	{
	    NSLog(@"OK: %@", accessToken);
	}

	- (void)     VKConnector:(VKConnector *)connector
	accessTokenRenewalFailed:(VKAccessToken *)accessToken
	{
	    NSLog(@"User denied to authorize app.");
	}

	@end     
</code>
</pre>
			  
			  Now, you can Build & Run your application. It should work just fine and after some time you should see this:
			  <img src="http://habrastorage.org/storage3/529/92c/d86/52992cd86a355a172a9bc0487dd3cae7.png"/>
			  
			  After entering login and password and tapping "Log in" button you should receive access token information in console, it should look something like:
<pre>
<code>
 2013-11-22 20:45:53.732 VKUserAuthorization[7591:80b] OK: {  	
	 "Creation time" = 1385138753;   
	 "Expiration time" = 1385225153;   
	  Permissions =     ( wall );
	  Token = 15f9365721d7d09099c2dca98407e92798c750b79cce7dac066aa803d633b4507cf93aeeaeb3aabfe45a3;
	  "User ID" = 58487857;
 }
</code>
</pre>

from now on you can make requests from user's behalf.
			</p>
		 
          <h3>How to work with several users?</h3>
		  <p>There are four methods you should know how to use.
		  3 of these methods are VKUser's and one VKConnector's.</p>
		  
		  <p>Lets start from basic example: your app should allow two or more users to log in, perform some action (like, repost, send private message etc) and log out.
		  When first user logs in, a record is made in VKStorage and his access token is saved + UIWebView saves cookies (thats what exactly prevents user to
		  enter his login and password each time he enters your app). To remove cookies which were stored by UIWebView after first user has logged in you should call
		  VKConnector's clearCookies method. After removing these cookies second user can log in and use your app (while first user's access token is still stored in 
		  VKStorage and can be activated at any time). And so on and so forth.</p>
		  
		  <p>VKUser class has 3 useful method. Lets talk about them.
		  First one is "+ (NSArray *)localUsers" which will return a list of all user IDs, users who authorized your app. 
		  Currently there is no way to remove saved access tokens (it may change sometime, but there is no point in it: don't need - don't use).</p>
		  
		  <p>Second one is "+ (BOOL)activateUserWithID:", which will return YES/NO if passed ID is valid and belongs to a valid (existing) user.
		  You can easily switch between active users and perform requests from their behalf.</p>
		  
		  <p>Third one is "+ (instancetype)currentUser" which returns currently active user. To understand this method lets describe two examples (these situations
		  are also described in documentation, so its just a copy-paste):</p>

<pre><code>
// user A authorized
// user B authorized
// user C authorized
[VKUser currentUser] // random user will be activated - A or B or C
</pre></code>

		  <p>Second example:</p>
<pre><code>
// user A authorized
[VKUser currentUser] // user A becomes active user
// user B authorized, but A is still active
// user C authorized, but A is still active
// so on.
</pre></code>		  
	      <p>So its really important to understand when to call "+ (instancetype)currentUser" method.</p>
		  
          <h3>How to make requests?</h3>
          <h3>How to work with VKRequestManager?</h3>
          <h3>How to work with VKConnector and VKConnectorDelegate?</h3>
          <h3>How to work with VKRequest and VKRequestDelegate?</h3>
          <h3>How to cache data? Cache life time, offline mode. Basic.</h3>
          <h3>How to cache data? Cache mp3, video, etc. Advanced.</h3>
		  <h3>How to upload files?</h3>

        </section>

        <aside id="sidebar">
          <a href="https://github.com/AndrewShmig/Vkontakte-iOS-SDK-LV/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/AndrewShmig/Vkontakte-iOS-SDK-LV/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/AndrewShmig/Vkontakte-iOS-SDK-LV"></a> is maintained by <a href="https://github.com/AndrewShmig">AndrewShmig</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
